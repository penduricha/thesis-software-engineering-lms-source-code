<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create New Exam Modal</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container py-5">
      <button
        class="btn btn-primary create-exam-btn px-6"
        data-bs-toggle="modal"
        data-bs-target="#createExamModal"
      >
        Add New Exam
      </button>

      <!-- Modal -->
      <div
        class="modal fade"
        id="createExamModal"
        tabindex="-1"
        aria-labelledby="createExamModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="createExamModalLabel">
                Create new exam by topic
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>

            <div class="modal-body">
              <div id="examForm" novalidate>
                <div class="row mb-2 py-3">
                  <label for="title" class="col-sm-3 col-form-label"
                    >Title:<span class="required-star">*</span></label>
                  <div class="col-sm-9">
                    <input
                      type="text"
                      class="form-control"
                      id="title"
                      required
                      placeholder="Enter exam title"
                    />
                    <span class="invalid-feedback">Title cannot be empty.</span>
                  </div>
                </div>

                <div class="row mb-2 py-3">
                  <label class="col-sm-3 col-form-label"
                    >Type exam:<span class="required-star">*</span></label
                  >
                  <div class="col-sm-9">
                    <select class="form-select" required>
                      <option value="">Select exam type</option>
                      <option value="type1">Type 1</option>
                      <option value="type2">Type 2</option>
                    </select>
                    <span class="invalid-feedback">
                      Please select a valid exam type.
                    </div>
                  </div>
                </div>

                <div class="row mb-2 py-3">
                  <label class="col-sm-3 col-form-label"
                    >Topic:<span class="required-star">*</span></label
                  >
                  <div class="col-sm-9">
                    <select class="form-select" required>
                      <option value="">Select topic</option>
                      <option value="topic1">Topic 1</option>
                      <option value="topic2">Topic 2</option>
                    </select>
                    <span class="invalid-feedback">
                      Please select a valid topic.
                    </span>
                  </div>
                </div>

                <div class="row mb-2 py-3">
                  <label class="col-sm-3 col-form-label"
                    >Retake:<span class="required-star">*</span></label
                  >
                  <div class="col-sm-9">
                    <select class="form-select" required>
                      <option value="">Select retake option</option>
                      <option value="yes">Yes</option>
                      <option value="no">No</option>
                    </select>
                    <span class="invalid-feedback">
                      Please select a retake option.
                    </span>
                  </div>
                </div>

                <div class="row mb-2 py-3">
                  <label class="col-sm-3 col-form-label"
                    >Scoring method:<span class="required-star">*</span></label
                  >
                  <div class="col-sm-9">
                    <select class="form-select" required>
                      <option value="">Select scoring method</option>
                      <option value="auto">Auto</option>
                      <option value="manual">Manual</option>
                    </select>
                    <span class="invalid-feedback">
                      Please select a scoring method.
                    </span>
                  </div>
                </div>

                <div class="row mb-2 py-3">
                  <label class="col-sm-3 col-form-label"
                    >Time:<span class="required-star">*</span></label
                  >
                  <div class="col-sm-9">
                    <select class="form-select" required>
                      <option value="">Select time duration</option>
                      <option value="30">30 minutes</option>
                      <option value="60">60 minutes</option>
                    </select>
                    <span class="invalid-feedback">
                      Please select a time duration.
                    </span>
                  </div>
                </div>

                <div class="row mb-2 py-3">
                  <label class="col-sm-3 col-form-label"
                    >Start date:<span class="required-star">*</span>
                  </label>
                  <div class="col-sm-9">
                    <input
                      type="date"
                      class="form-control"
                      id="startDate"
                      required
                    />
                    <div class="invalid-feedback">Start date is required.</div>
                  </div>
                </div>

                <div class="row mb-2 py-3">
                  <label class="col-sm-3 col-form-label"
                    >End date:<span class="required-star">*</span></label
                  >
                  <div class="col-sm-9">
                    <input
                      type="date"
                      class="form-control"
                      id="endDate"
                      required
                    />
                    <div class="invalid-feedback">
                      End date is required and cannot be before start date.
                    </div>
                  </div>
                </div>

                <div class="row mb-2 py-3">
                  <label for="examPaper" class="col-sm-3 col-form-label"
                    >Exam Paper (link File):<span class="required-star"
                      >*</span
                    ></label
                  >
                  <div class="col-sm-9">
                    <input
                      type="text"
                      class="form-control"
                      id="examPaper"
                      placeholder="https://drive.google.com/..."
                      required
                    />
                    <div class="invalid-feedback">
                      Exam paper link is required.
                    </div>
                  </div>
                </div>

                <div class="row mb-2 py-3">
                  <label class="col-sm-3 col-form-label"
                    >Password (if any):</label
                  >
                  <div class="col-sm-9">
                    <input
                      type="password"
                      class="form-control"
                      placeholder="Enter password"
                    />
                    <span class="form-text">
                      (password must be digits and greater than 5 characters)
                    </span>
                  </div>
                </div>

                <div class="text-end">
                  <button type="submit" class="btn btn-create">Create</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.querySelectorAll("input, select").forEach(function (element) {
        element.addEventListener("input", function () {
          if (element.checkValidity()) {
            element.classList.remove("is-invalid");
            element.classList.add("is-valid");
          } else {
            element.classList.remove("is-valid");
            element.classList.add("is-invalid");
          }
        });
      });
      const startDateInput = document.getElementById("startDate");
      const endDateInput = document.getElementById("endDate");

      startDateInput.addEventListener("change", validateEndDate);
      endDateInput.addEventListener("change", validateEndDate);

      function validateEndDate() {
        const startDate = new Date(startDateInput.value);
        const endDate = new Date(endDateInput.value);

        if (endDate < startDate) {
          endDateInput.setCustomValidity("End date must be after start date.");
          endDateInput.classList.add("is-invalid");
        } else {
          endDateInput.setCustomValidity("");
          endDateInput.classList.remove("is-invalid");
        }
      }
    </script>
  </body>
</html>
